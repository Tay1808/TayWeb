<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Лоринец Татьяна Андреевна. Расчетно-графическая работа.</title>
    <link rel="stylesheet" href="../tayrgz.css">
    <link rel="shortcut icon" href="../faviconrgz.ico" type="image/x-icon">
    <link rel="icon" href="../favicon-16x16rgz.png">
    <link rel="icon" href="../favicon-32x32rgz.png">
</head>
<script>
    function convert() {
        const rubAmountInput = document.getElementById('rubInput');
        const usdAmountInput = document.getElementById('usdInput');
        const selectedRub = rubAmountInput.value;
        const selectedUsd = usdAmountInput.value;
        const rubAmount = Number(rubAmountInput.value);
        const dolAmount = Number(usdAmountInput.value);



        const url = 'https://www.cbr-xml-daily.ru/daily_json.js';
        fetch(url)
            .then(function(response){
                return response.json();
            })
            .then(function(json) {
                const currentDate = json.Date;
                const rubRate = json.Valute.RUB.Value.toFixed(2);
                const usdRate = json.Valute.USD.Previous.toFixed(2);

                let convertedAmount;
                let convertedCurrency;

                if (selectedRub) {
                    convertedAmount = rubAmount / usdRate;
                    convertedCurrency = 'USD';
                } else {
                    convertedAmount = usdAmount * rubRate;
                    convertedCurrency = 'RUB';
                }

                const message = `
                    <div>
                        <p>Дата запроса: ${currentDate}</p>
                        <p>Конвертированная сумма: ${convertedAmount.toFixed(2)} ${convertedCurrency}</p>
                        <p><a href="https://www.cbr-xml-daily.ru/">Источник данных</a></p>
                    </div>
                `;
                document.getElementById('result').innerHTML = message;

                let button = document.querySelector('button');
                button.style.display = 'none';
            })
    }        
            
                    
</script>
<style>
    p {
        text-align: center;
    }
</style>
<body>
    <header>
        <ul>
            <li><a href="glav.html">Главная страница.</a></li>
            <li><a href="ptb.html">О компании.</a></li>
            <li><a href="news.html">Новости.</a></li>
            <li><a href="contacts.html">Контактная информация.</a></li>
            <li><a href="video.html">Видио.</a></li>
            <li><a href="calculator.html">Курс валют.</a></li>
        </ul>
    </header>

    <main>  
       </div>
       <h1>Курс валют: калькулятор</h1>

       <input type="number" id="rubInput" placeholder="Сумма в рублях">
       <input type="number" id="usdInput" placeholder="Сумма в долларах">
       <button onclick="convert()">Конвертировать</button>
       <div id="result"></div>
    </main>

    <footer>
        &copy; Лоринец Таня, ФБИ-22, 2 курс, 2024
    </footer>
</body>
</html>